# Итоги экспериментов: сеть «Елена»

## Механизм «Эхо-локации»

Обнаружение двойной траты основано на **коллизии якорей**: если два платежа от одного отправителя имеют один и тот же anchor (историю состояния), но разных получателей, любой узел, увидевший обе транзакции, создаёт Alert. Alert распространяется по сети, репутация атакующего падает.

---

## Надёжность защиты

- Во всех прогонах A/B (8 конфигураций: baseline, no_chaff, no_rewiring, no_protection, heavy_chaff, frequent_rewiring, rare_rewiring, minimal) **атака не прошла ни разу**.
- **Время обнаружения** стабильно ~3 шага.
- **Покрытие Alert** — 100% узлов получают предупреждение.
- **Ложные срабатывания** — 0.
- **Репутация злого узла** после атаки падает до минимума (0.01).

Вывод: **механизм «Эхо-локации» в рамках симуляции показал надёжность** — базовая защита работает безупречно.

---

## Оптимизация по нагрузке

| Конфигурация   | Chaff | Rewiring | Пиковая нагрузка (сообщ/шаг) |
|----------------|-------|----------|------------------------------|
| **baseline (no_chaff)** | ❌ | ✅ | **минимальная** (оптимально) |
| with_chaff     | ✅    | ✅       | выше из-за шумовых tx        |
| no_protection  | ❌    | ❌       | сопоставимо с baseline      |

**Рекомендация:** использовать **no_chaff** как базовую конфигурацию (chaff отключён по умолчанию в `config/settings.py`). Включение chaff увеличивает трафик при той же эффективности обнаружения.

---

## Масштаб и сценарии

- **Масштаб по умолчанию для батча:** 200 узлов, 500 шагов (`run_batch.py --nodes 200 --steps 500`). Быстрый прогон: `--scale small` (50/80). Крупный: `--scale large` (300/800).
- **Несколько злых узлов в сговоре:** сценарий 3 поддерживает `--evil N`. Все N злых узлов выполняют двойную трату на одном шаге; конфликты обнаруживаются так же.
  ```bash
  python3 main.py --scenario 3 --nodes 100 --evil 3 --steps 150
  ```

---

## Файлы и воспроизводимость

- Результаты A/B: `results/ab_tests_YYYYMMDD_HHMMSS/results.csv`, `comparison_plots.png`, `logs/`.
- Параметры: `config/settings.py`, `REPUTATION_PARAMS`, `SIMULATION_PARAMS`.
- Батч: `./run_ab_tests.sh` или `python3 run_batch.py --scale default`.

---

*Документ фиксирует состояние экспериментов на момент внедрения: no_chaff по умолчанию, масштаб 200/500, сценарий с несколькими злыми узлами (--evil).*
